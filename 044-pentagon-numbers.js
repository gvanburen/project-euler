/*Pentagonal numbers are generated by the formula, Pn=n(3n−1)/2. The first ten pentagonal numbers are:

1, 5, 12, 22, 35, 51, 70, 92, 117, 145, ...

It can be seen that P4 + P7 = 22 + 70 = 92 = P8. However, their difference, 70 − 22 = 48, is not pentagonal.

Find the pair of pentagonal numbers, Pj and Pk, for which their sum and difference are pentagonal and D = |Pk − Pj| is minimised; what is the value of D?*/

// too slow
var pent = [];
for (var n = 1; n < 5000; n++) {
    pent.push(.5 * n * (3 * n - 1));
}
for (var k = 0; k < pent.length; k++) {
    for (var j = pent.length; j > 0; j++) {
        if (
            pent.indexOf(Math.abs(pent[k] + pent[j])) != -1 &&
            pent.indexOf(Math.abs(pent[k] - pent[j])) != -1
        ) {
            console.log(Math.abs(pent[k] - pent[j]));
        }
    }
}

// much better solution
function pentagonal(number) {
    var tmp = (Math.sqrt(24 * number + 1) + 1) / 6;
    return tmp % 1 === 0;
}

var result = 0;
var notFound = true;
var i = 1;
while (notFound) {
    i++;
    var n = i * (3 * i - 1) / 2;
    for (var j = i - 1; j > 0; j--) {
        var m = j * (3 * j - 1) / 2;
        if (pentagonal(n - m) && pentagonal(n + m)) {
            result = n - m;
            notFound = false;
            break;
        }
    }
}
console.log(result);